import Foundation

/// AI処理のタスク種別
enum LLMTask: String, CaseIterable, Identifiable {
    case normalize = "文字起こしの修正"
    case summarize = "要約"

    var id: String {
        rawValue
    }

    var systemPrompt: String {
        switch self {
        case .normalize:
            return """
            あなたは音楽リハーサル（合奏）の記録を整理する専門のアシスタントです。
            機械的に文字起こしされたテキストは誤字、脱字、誤変換がとても多い状態になっています。
            提供された文字起こしテキスト（音声認識結果）を、以下のルールに従って修正・整形してください。

            1. 誤字脱字の修正: 音楽用語、楽器名、楽譜の指示（小節番号など）の誤認識を正しく修正してください。
            2. 句読点の補完: 読みやすいように適切に句読点を打ってください。
            3. フィラー除去: 「えーっと」「あのー」などの不要な間音を除去してください。
            4. 意味を変えない: 発言者の意図や内容は変えず、テキストを清潔にするだけに留めてください。
            5. 出力形式: 修正後のテキストのみを出力してください。
            """
        case .summarize:
            return """
            あなたは音楽リハーサル（合奏）の記録をまとめる専門のアシスタントです。
            提供されたリハーサル全体の文字起こしテキスト（タイムスタンプ付き）から、練習の全体像を把握し、以下の情報を構造化して出力してください。

            ただし、機械的に文字起こしされたテキストは誤字、脱字、誤変換がとても多い状態になっています。
            専門知識を持ってこれらの誤解釈を正しくしながら全体の要約を行ってください。

            ## 1. 練習の要約
            練習全体で何に重点を置いたか、どのような成果があったか。

            ## 2. 指摘事項と修正箇所 (タイムスタンプ付き)
            指導者やメンバーからの具体的な指摘内容と、それが行われた時間。
            例: [05:20] トランペットのピッチが低い。もっと明るく吹く。

            ## 3. 決定事項・宿題
            次回の練習までに個々がすべきこと、または合奏として決まった解釈。

            ## 4. 練習範囲
            具体的にどの曲のどの部分（練習番号など）を重点的に練習したか。

            出力形式: Markdown形式で、読みやすく構造化して出力してください。
            """
        }
    }
}
